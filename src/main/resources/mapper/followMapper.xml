<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.candm.mapper.FollowMapper">
    <insert id="followInsert">
            insert into tbl_follow(follower_id, following_id)
            values (#{followerId}, #{followingId})
    </insert>

    <select id="selectAllFollowerByMemberId">
            select
                m.member_name,
                f.id, f.follower_id, f.following_id, f.created_datetime, f.updated_datetime
            from tbl_follow f join tbl_member m
            on f.follower_id = m.id
            where f.following_id = #{id}
            limit #{criteria.count} offset #{criteria.offset}
    </select>

    <select id="selectById">
        select
            m.member_name,
            f.id, f.follower_id, f.following_id, f.created_datetime, f.updated_datetime
        from tbl_member m join tbl_follow f
        on m.id = f.follower_id
        where m.id = #{id}
    </select>

    <select id="selectTotal">
        select count(*)
        from tbl_member m join tbl_follow f
            on m.id = f.following_id
        where m.id = #{id}
    </select>
</mapper>